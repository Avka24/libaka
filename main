-- Roblox UI Library
-- Premium Modern UI Library for Script Hubs

local UILibrary = {}
local TweenService = game:GetService("TweenService")
local UserInputService = game:GetService("UserInputService")
local CoreGui = game:GetService("CoreGui")
local RunService = game:GetService("RunService")

-- Theme Configuration
local Theme = {
    Background = Color3.fromRGB(20, 20, 25),
    SecondaryBackground = Color3.fromRGB(25, 25, 30),
    TertiaryBackground = Color3.fromRGB(30, 30, 35),
    Accent = Color3.fromRGB(0, 170, 255),
    Text = Color3.fromRGB(255, 255, 255),
    SecondaryText = Color3.fromRGB(180, 180, 180),
    Border = Color3.fromRGB(40, 40, 45),
    Hover = Color3.fromRGB(35, 35, 40),
    Success = Color3.fromRGB(0, 200, 100),
    Error = Color3.fromRGB(255, 50, 50)
}

-- Utility Functions
local function CreateTween(instance, properties, duration)
    duration = duration or 0.2
    local tween = TweenService:Create(instance, TweenInfo.new(duration, Enum.EasingStyle.Quad), properties)
    return tween
end

local function MakeDraggable(frame, dragHandle)
    local dragging = false
    local dragStart = nil
    local startPos = nil
    
    dragHandle.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
            dragging = true
            dragStart = input.Position
            startPos = frame.Position
        end
    end)
    
    dragHandle.InputChanged:Connect(function(input)
        if dragging and (input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch) then
            local delta = input.Position - dragStart
            frame.Position = UDim2.new(
                startPos.X.Scale,
                startPos.X.Offset + delta.X,
                startPos.Y.Scale,
                startPos.Y.Offset + delta.Y
            )
        end
    end)
    
    UserInputService.InputEnded:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
            dragging = false
        end
    end)
end

-- Main Library Function
function UILibrary:CreateWindow(config)
    config = config or {}
    local WindowTitle = config.Title or "UI Library"
    local WindowSubtitle = config.Subtitle or ""
    local AccentColor = config.Accent or Theme.Accent
    Theme.Accent = AccentColor
    
    -- Cleanup existing UI
    local existingUI = CoreGui:FindFirstChild("UILibraryScreenGui")
    if existingUI then
        existingUI:Destroy()
    end
    
    -- Create ScreenGui
    local ScreenGui = Instance.new("ScreenGui")
    ScreenGui.Name = "UILibraryScreenGui"
    ScreenGui.Parent = CoreGui
    ScreenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
    ScreenGui.ResetOnSpawn = false
    
    -- Main Frame
    local MainFrame = Instance.new("Frame")
    MainFrame.Name = "MainFrame"
    MainFrame.Size = UDim2.new(0, 550, 0, 400)
    MainFrame.Position = UDim2.new(0.5, -275, 0.5, -200)
    MainFrame.BackgroundColor3 = Theme.Background
    MainFrame.BorderSizePixel = 0
    MainFrame.Parent = ScreenGui
    MainFrame.ClipsDescendants = true
    
    local MainCorner = Instance.new("UICorner")
    MainCorner.CornerRadius = UDim.new(0, 8)
    MainCorner.Parent = MainFrame
    
    local MainStroke = Instance.new("UIStroke")
    MainStroke.Color = Theme.Border
    MainStroke.Thickness = 1
    MainStroke.Parent = MainFrame
    
    -- Header
    local Header = Instance.new("Frame")
    Header.Name = "Header"
    Header.Size = UDim2.new(1, 0, 0, 50)
    Header.BackgroundColor3 = Theme.SecondaryBackground
    Header.BorderSizePixel = 0
    Header.Parent = MainFrame
    
    local HeaderCorner = Instance.new("UICorner")
    HeaderCorner.CornerRadius = UDim.new(0, 8)
    HeaderCorner.Parent = Header
    
    -- Title
    local Title = Instance.new("TextLabel")
    Title.Name = "Title"
    Title.Size = UDim2.new(1, -120, 0, 25)
    Title.Position = UDim2.new(0, 15, 0, 5)
    Title.BackgroundTransparency = 1
    Title.Text = WindowTitle
    Title.TextColor3 = Theme.Text
    Title.TextSize = 16
    Title.Font = Enum.Font.GothamBold
    Title.TextXAlignment = Enum.TextXAlignment.Left
    Title.Parent = Header
    
    -- Subtitle
    local Subtitle = Instance.new("TextLabel")
    Subtitle.Name = "Subtitle"
    Subtitle.Size = UDim2.new(1, -120, 0, 15)
    Subtitle.Position = UDim2.new(0, 15, 0, 30)
    Subtitle.BackgroundTransparency = 1
    Subtitle.Text = WindowSubtitle
    Subtitle.TextColor3 = Theme.SecondaryText
    Subtitle.TextSize = 12
    Subtitle.Font = Enum.Font.Gotham
    Subtitle.TextXAlignment = Enum.TextXAlignment.Left
    Subtitle.Parent = Header
    
    -- Control Buttons
    local ControlsFrame = Instance.new("Frame")
    ControlsFrame.Name = "Controls"
    ControlsFrame.Size = UDim2.new(0, 80, 0, 30)
    ControlsFrame.Position = UDim2.new(1, -95, 0, 10)
    ControlsFrame.BackgroundTransparency = 1
    ControlsFrame.Parent = Header
    
    local ControlsLayout = Instance.new("UIListLayout")
    ControlsLayout.FillDirection = Enum.FillDirection.Horizontal
    ControlsLayout.HorizontalAlignment = Enum.HorizontalAlignment.Right
    ControlsLayout.SortOrder = Enum.SortOrder.LayoutOrder
    ControlsLayout.Padding = UDim.new(0, 8)
    ControlsLayout.Parent = ControlsFrame
    
    -- Minimize Button
    local MinimizeBtn = Instance.new("TextButton")
    MinimizeBtn.Name = "MinimizeBtn"
    MinimizeBtn.Size = UDim2.new(0, 30, 0, 30)
    MinimizeBtn.BackgroundColor3 = Theme.TertiaryBackground
    MinimizeBtn.Text = "−"
    MinimizeBtn.TextColor3 = Theme.Text
    MinimizeBtn.TextSize = 18
    MinimizeBtn.Font = Enum.Font.GothamBold
    MinimizeBtn.LayoutOrder = 1
    MinimizeBtn.Parent = ControlsFrame
    
    local MinimizeCorner = Instance.new("UICorner")
    MinimizeCorner.CornerRadius = UDim.new(0, 6)
    MinimizeCorner.Parent = MinimizeBtn
    
    -- Close Button
    local CloseBtn = Instance.new("TextButton")
    CloseBtn.Name = "CloseBtn"
    CloseBtn.Size = UDim2.new(0, 30, 0, 30)
    CloseBtn.BackgroundColor3 = Theme.Error
    CloseBtn.Text = "×"
    CloseBtn.TextColor3 = Theme.Text
    CloseBtn.TextSize = 20
    CloseBtn.Font = Enum.Font.GothamBold
    CloseBtn.LayoutOrder = 2
    CloseBtn.Parent = ControlsFrame
    
    local CloseCorner = Instance.new("UICorner")
    CloseCorner.CornerRadius = UDim.new(0, 6)
    CloseCorner.Parent = CloseBtn
    
    -- Tab Container
    local TabContainer = Instance.new("Frame")
    TabContainer.Name = "TabContainer"
    TabContainer.Size = UDim2.new(0, 120, 1, -50)
    TabContainer.Position = UDim2.new(0, 0, 0, 50)
    TabContainer.BackgroundColor3 = Theme.SecondaryBackground
    TabContainer.BorderSizePixel = 0
    TabContainer.Parent = MainFrame
    
    local TabList = Instance.new("UIListLayout")
    TabList.SortOrder = Enum.SortOrder.LayoutOrder
    TabList.Padding = UDim.new(0, 5)
    TabList.Parent = TabContainer
    
    local TabPadding = Instance.new("UIPadding")
    TabPadding.PaddingTop = UDim.new(0, 10)
    TabPadding.PaddingBottom = UDim.new(0, 10)
    TabPadding.PaddingLeft = UDim.new(0, 10)
    TabPadding.PaddingRight = UDim.new(0, 10)
    TabPadding.Parent = TabContainer
    
    -- Content Container
    local ContentContainer = Instance.new("Frame")
    ContentContainer.Name = "ContentContainer"
    ContentContainer.Size = UDim2.new(1, -120, 1, -50)
    ContentContainer.Position = UDim2.new(0, 120, 0, 50)
    ContentContainer.BackgroundTransparency = 1
    ContentContainer.Parent = MainFrame
    
    -- Make draggable
    MakeDraggable(MainFrame, Header)
    
    -- Window Controls
    local minimized = false
    local originalSize = MainFrame.Size
    
    MinimizeBtn.MouseButton1Click:Connect(function()
        minimized = not minimized
        local targetSize = minimized and UDim2.new(0, 550, 0, 50) or originalSize
        CreateTween(MainFrame, {Size = targetSize}, 0.3):Play()
        MinimizeBtn.Text = minimized and "+" or "−"
    end)
    
    CloseBtn.MouseButton1Click:Connect(function()
        CreateTween(MainFrame, {Size = UDim2.new(0, 0, 0, 0)}, 0.2):Play()
        task.wait(0.2)
        ScreenGui:Destroy()
    end)
    
    -- Hover effects for buttons
    for _, btn in pairs({MinimizeBtn, CloseBtn}) do
        btn.MouseEnter:Connect(function()
            CreateTween(btn, {BackgroundColor3 = Theme.Hover}, 0.15):Play()
        end)
        btn.MouseLeave:Connect(function()
            local color = btn == CloseBtn and Theme.Error or Theme.TertiaryBackground
            CreateTween(btn, {BackgroundColor3 = color}, 0.15):Play()
        end)
    end
    
    -- Window Object
    local Window = {
        Tabs = {},
        CurrentTab = nil,
        ScreenGui = ScreenGui,
        MainFrame = MainFrame
    }
    
    function Window:CreateTab(name, icon)
        local Tab = {
            Name = name,
            Sections = {},
            Elements = {}
        }
        
        -- Tab Button
        local TabButton = Instance.new("TextButton")
        TabButton.Name = name
        TabButton.Size = UDim2.new(1, 0, 0, 35)
        TabButton.BackgroundColor3 = Theme.TertiaryBackground
        TabButton.Text = icon and (icon .. " " .. name) or name
        TabButton.TextColor3 = Theme.SecondaryText
        TabButton.TextSize = 13
        TabButton.Font = Enum.Font.GothamMedium
        TabButton.Parent = TabContainer
        
        local TabButtonCorner = Instance.new("UICorner")
        TabButtonCorner.CornerRadius = UDim.new(0, 6)
        TabButtonCorner.Parent = TabButton
        
        -- Tab Content
        local TabContent = Instance.new("ScrollingFrame")
        TabContent.Name = name .. "Content"
        TabContent.Size = UDim2.new(1, -20, 1, -20)
        TabContent.Position = UDim2.new(0, 10, 0, 10)
        TabContent.BackgroundTransparency = 1
        TabContent.BorderSizePixel = 0
        TabContent.ScrollBarThickness = 4
        TabContent.ScrollBarImageColor3 = Theme.Accent
        TabContent.Visible = false
        TabContent.Parent = ContentContainer
        
        local ContentList = Instance.new("UIListLayout")
        ContentList.SortOrder = Enum.SortOrder.LayoutOrder
        ContentList.Padding = UDim.new(0, 8)
        ContentList.Parent = TabContent
        
        ContentList:GetPropertyChangedSignal("AbsoluteContentSize"):Connect(function()
            TabContent.CanvasSize = UDim2.new(0, 0, 0, ContentList.AbsoluteContentSize.Y + 10)
        end)
        
        Tab.TabButton = TabButton
        Tab.TabContent = TabContent
        
        -- Tab Selection
        TabButton.MouseButton1Click:Connect(function()
            for _, tab in pairs(Window.Tabs) do
                tab.TabContent.Visible = false
                tab.TabButton.BackgroundColor3 = Theme.TertiaryBackground
                tab.TabButton.TextColor3 = Theme.SecondaryText
            end
            
            TabContent.Visible = true
            TabButton.BackgroundColor3 = Theme.Accent
            TabButton.TextColor3 = Theme.Text
            Window.CurrentTab = Tab
        end)
        
        -- Hover effect
        TabButton.MouseEnter:Connect(function()
            if Window.CurrentTab ~= Tab then
                CreateTween(TabButton, {BackgroundColor3 = Theme.Hover}, 0.15):Play()
            end
        end)
        
        TabButton.MouseLeave:Connect(function()
            if Window.CurrentTab ~= Tab then
                CreateTween(TabButton, {BackgroundColor3 = Theme.TertiaryBackground}, 0.15):Play()
            end
        end)
        
        -- Select first tab by default
        if #Window.Tabs == 0 then
            TabContent.Visible = true
            TabButton.BackgroundColor3 = Theme.Accent
            TabButton.TextColor3 = Theme.Text
            Window.CurrentTab = Tab
        end
        
        table.insert(Window.Tabs, Tab)
        
        -- Tab Methods
        function Tab:CreateSection(name)
            local Section = {
                Name = name,
                Elements = {}
            }
            
            local SectionFrame = Instance.new("Frame")
            SectionFrame.Name = name
            SectionFrame.Size = UDim2.new(1, 0, 0, 35)
            SectionFrame.BackgroundColor3 = Theme.SecondaryBackground
            SectionFrame.BorderSizePixel = 0
            SectionFrame.Parent = TabContent
            
            local SectionCorner = Instance.new("UICorner")
            SectionCorner.CornerRadius = UDim.new(0, 6)
            SectionCorner.Parent = SectionFrame
            
            local SectionTitle = Instance.new("TextLabel")
            SectionTitle.Name = "Title"
            SectionTitle.Size = UDim2.new(1, -20, 0, 25)
            SectionTitle.Position = UDim2.new(0, 10, 0, 5)
            SectionTitle.BackgroundTransparency = 1
            SectionTitle.Text = name
            SectionTitle.TextColor3 = Theme.Text
            SectionTitle.TextSize = 14
            SectionTitle.Font = Enum.Font.GothamBold
            SectionTitle.TextXAlignment = Enum.TextXAlignment.Left
            SectionTitle.Parent = SectionFrame
            
            local SectionContent = Instance.new("Frame")
            SectionContent.Name = "Content"
            SectionContent.Size = UDim2.new(1, -20, 1, -35)
            SectionContent.Position = UDim2.new(0, 10, 0, 35)
            SectionContent.BackgroundTransparency = 1
            SectionContent.Parent = SectionFrame
            
            local SectionLayout = Instance.new("UIListLayout")
            SectionLayout.SortOrder = Enum.SortOrder.LayoutOrder
            SectionLayout.Padding = UDim.new(0, 5)
            SectionLayout.Parent = SectionContent
            
            SectionLayout:GetPropertyChangedSignal("AbsoluteContentSize"):Connect(function()
                SectionFrame.Size = UDim2.new(1, 0, 0, SectionLayout.AbsoluteContentSize.Y + 45)
            end)
            
            Section.Frame = SectionFrame
            Section.Content = SectionContent
            
            table.insert(Tab.Sections, Section)
            
            -- Section Methods
            function Section:AddButton(config)
                config = config or {}
                local ButtonName = config.Name or "Button"
                local Callback = config.Callback or function() end
                
                local ButtonFrame = Instance.new("Frame")
                ButtonFrame.Name = "ButtonFrame"
                ButtonFrame.Size = UDim2.new(1, 0, 0, 35)
                ButtonFrame.BackgroundColor3 = Theme.TertiaryBackground
                ButtonFrame.BorderSizePixel = 0
                ButtonFrame.Parent = SectionContent
                
                local ButtonCorner = Instance.new("UICorner")
                ButtonCorner.CornerRadius = UDim.new(0, 6)
                ButtonCorner.Parent = ButtonFrame
                
                local Button = Instance.new("TextButton")
                Button.Name = "Button"
                Button.Size = UDim2.new(1, 0, 1, 0)
                Button.BackgroundTransparency = 1
                Button.Text = ButtonName
                Button.TextColor3 = Theme.Text
                Button.TextSize = 13
                Button.Font = Enum.Font.GothamMedium
                Button.Parent = ButtonFrame
                
                Button.MouseButton1Click:Connect(function()
                    pcall(Callback)
                    CreateTween(ButtonFrame, {BackgroundColor3 = Theme.Accent}, 0.1):Play()
                    task.wait(0.1)
                    CreateTween(ButtonFrame, {BackgroundColor3 = Theme.TertiaryBackground}, 0.1):Play()
                end)
                
                Button.MouseEnter:Connect(function()
                    CreateTween(ButtonFrame, {BackgroundColor3 = Theme.Hover}, 0.15):Play()
                end)
                
                Button.MouseLeave:Connect(function()
                    CreateTween(ButtonFrame, {BackgroundColor3 = Theme.TertiaryBackground}, 0.15):Play()
                end)
                
                return ButtonFrame
            end
            
            function Section:AddToggle(config)
                config = config or {}
                local ToggleName = config.Name or "Toggle"
                local Default = config.Default or false
                local Callback = config.Callback or function() end
                
                local ToggleFrame = Instance.new("Frame")
                ToggleFrame.Name = "ToggleFrame"
                ToggleFrame.Size = UDim2.new(1, 0, 0, 35)
                ToggleFrame.BackgroundColor3 = Theme.TertiaryBackground
                ToggleFrame.BorderSizePixel = 0
                ToggleFrame.Parent = SectionContent
                
                local ToggleCorner = Instance.new("UICorner")
                ToggleCorner.CornerRadius = UDim.new(0, 6)
                ToggleCorner.Parent = ToggleFrame
                
                local ToggleLabel = Instance.new("TextLabel")
                ToggleLabel.Name = "Label"
                ToggleLabel.Size = UDim2.new(1, -60, 1, 0)
                ToggleLabel.Position = UDim2.new(0, 10, 0, 0)
                ToggleLabel.BackgroundTransparency = 1
                ToggleLabel.Text = ToggleName
                ToggleLabel.TextColor3 = Theme.Text
                ToggleLabel.TextSize = 13
                ToggleLabel.Font = Enum.Font.GothamMedium
                ToggleLabel.TextXAlignment = Enum.TextXAlignment.Left
                ToggleLabel.Parent = ToggleFrame
                
                local ToggleButton = Instance.new("TextButton")
                ToggleButton.Name = "ToggleButton"
                ToggleButton.Size = UDim2.new(0, 40, 0, 20)
                ToggleButton.Position = UDim2.new(1, -50, 0.5, -10)
                ToggleButton.BackgroundColor3 = Default and Theme.Accent or Theme.Border
                ToggleButton.Text = ""
                ToggleButton.Parent = ToggleFrame
                
                local ToggleBtnCorner = Instance.new("UICorner")
                ToggleBtnCorner.CornerRadius = UDim.new(1, 0)
                ToggleBtnCorner.Parent = ToggleButton
                
                local ToggleCircle = Instance.new("Frame")
                ToggleCircle.Name = "Circle"
                ToggleCircle.Size = UDim2.new(0, 16, 0, 16)
                ToggleCircle.Position = Default and UDim2.new(1, -18, 0.5, -8) or UDim2.new(0, 2, 0.5, -8)
                ToggleCircle.BackgroundColor3 = Theme.Text
                ToggleCircle.BorderSizePixel = 0
                ToggleCircle.Parent = ToggleButton
                
                local CircleCorner = Instance.new("UICorner")
                CircleCorner.CornerRadius = UDim.new(1, 0)
                CircleCorner.Parent = ToggleCircle
                
                local toggled = Default
                
                ToggleButton.MouseButton1Click:Connect(function()
                    toggled = not toggled
                    
                    local targetColor = toggled and Theme.Accent or Theme.Border
                    local targetPos = toggled and UDim2.new(1, -18, 0.5, -8) or UDim2.new(0, 2, 0.5, -8)
                    
                    CreateTween(ToggleButton, {BackgroundColor3 = targetColor}, 0.2):Play()
                    CreateTween(ToggleCircle, {Position = targetPos}, 0.2):Play()
                    
                    pcall(Callback, toggled)
                end)
                
                ToggleFrame.MouseEnter:Connect(function()
                    CreateTween(ToggleFrame, {BackgroundColor3 = Theme.Hover}, 0.15):Play()
                end)
                
                ToggleFrame.MouseLeave:Connect(function()
                    CreateTween(ToggleFrame, {BackgroundColor3 = Theme.TertiaryBackground}, 0.15):Play()
                end)
                
                local ToggleObject = {}
                function ToggleObject:SetValue(value)
                    toggled = value
                    local targetColor = toggled and Theme.Accent or Theme.Border
                    local targetPos = toggled and UDim2.new(1, -18, 0.5, -8) or UDim2.new(0, 2, 0.5, -8)
                    CreateTween(ToggleButton, {BackgroundColor3 = targetColor}, 0.2):Play()
                    CreateTween(ToggleCircle, {Position = targetPos}, 0.2):Play()
                end
                
                return ToggleObject
            end
            
            function Section:AddSlider(config)
                config = config or {}
                local SliderName = config.Name or "Slider"
                local Min = config.Min or 0
                local Max = config.Max or 100
                local Default = config.Default or 50
                local Callback = config.Callback or function() end
                
                local SliderFrame = Instance.new("Frame")
                SliderFrame.Name = "SliderFrame"
                SliderFrame.Size = UDim2.new(1, 0, 0, 50)
                SliderFrame.BackgroundColor3 = Theme.TertiaryBackground
                SliderFrame.BorderSizePixel = 0
                SliderFrame.Parent = SectionContent
                
                local SliderCorner = Instance.new("UICorner")
                SliderCorner.CornerRadius = UDim.new(0, 6)
                SliderCorner.Parent = SliderFrame
                
                local SliderLabel = Instance.new("TextLabel")
                SliderLabel.Name = "Label"
                SliderLabel.Size = UDim2.new(1, -60, 0, 20)
                SliderLabel.Position = UDim2.new(0, 10, 0, 5)
                SliderLabel.BackgroundTransparency = 1
                SliderLabel.Text = SliderName
                SliderLabel.TextColor3 = Theme.Text
                SliderLabel.TextSize = 13
                SliderLabel.Font = Enum.Font.GothamMedium
                SliderLabel.TextXAlignment = Enum.TextXAlignment.Left
                SliderLabel.Parent = SliderFrame
                
                local SliderValue = Instance.new("TextLabel")
                SliderValue.Name = "Value"
                SliderValue.Size = UDim2.new(0, 50, 0, 20)
                SliderValue.Position = UDim2.new(1, -60, 0, 5)
                SliderValue.BackgroundTransparency = 1
                SliderValue.Text = tostring(Default)
                SliderValue.TextColor3 = Theme.Accent
                SliderValue.TextSize = 13
                SliderValue.Font = Enum.Font.GothamBold
                SliderValue.TextXAlignment = Enum.TextXAlignment.Right
                SliderValue.Parent = SliderFrame
                
                local SliderBackground = Instance.new("Frame")
                SliderBackground.Name = "Background"
                SliderBackground.Size = UDim2.new(1, -20, 0, 4)
                SliderBackground.Position = UDim2.new(0, 10, 1, -15)
                SliderBackground.BackgroundColor3 = Theme.Border
                SliderBackground.BorderSizePixel = 0
                SliderBackground.Parent = SliderFrame
                
                local SliderBgCorner = Instance.new("UICorner")
                SliderBgCorner.CornerRadius = UDim.new(1, 0)
                SliderBgCorner.Parent = SliderBackground
                
                local SliderFill = Instance.new("Frame")
                SliderFill.Name = "Fill"
                SliderFill.Size = UDim2.new((Default - Min) / (Max - Min), 0, 1, 0)
                SliderFill.BackgroundColor3 = Theme.Accent
                SliderFill.BorderSizePixel = 0
                SliderFill.Parent = SliderBackground
                
                local SliderFillCorner = Instance.new("UICorner")
                SliderFillCorner.CornerRadius = UDim.new(1, 0)
                SliderFillCorner.Parent = SliderFill
                
                local dragging = false
                
                local function UpdateSlider(input)
                    local pos = math.clamp((input.Position.X - SliderBackground.AbsolutePosition.X) / SliderBackground.AbsoluteSize.X, 0, 1)
                    local value = math.floor(Min + (Max - Min) * pos)
                    
                    SliderValue.Text = tostring(value)
                    CreateTween(SliderFill, {Size = UDim2.new(pos, 0, 1, 0)}, 0.1):Play()
                    
                    pcall(Callback, value)
                end
                
                SliderBackground.InputBegan:Connect(function(input)
                    if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
                        dragging = true
                        UpdateSlider(input)
                    end
                end)
                
                SliderBackground.InputChanged:Connect(function(input)
                    if dragging and (input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch) then
                        UpdateSlider(input)
                    end
                end)
                
                UserInputService.InputEnded:Connect(function(input)
                    if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
                        dragging = false
                    end
                end)
                
                local SliderObject = {}
                function SliderObject:SetValue(value)
                    value = math.clamp(value, Min, Max)
                    local pos = (value - Min) / (Max - Min)
                    SliderValue.Text = tostring(value)
                    CreateTween(SliderFill, {Size = UDim2.new(pos, 0, 1, 0)}, 0.1):Play()
                end
                
                return SliderObject
            end
            
            function Section:AddDropdown(config)
                config = config or {}
                local DropdownName = config.Name or "Dropdown"
                local Options = config.Options or {"Option 1", "Option 2"}
                local Default = config.Default or Options[1]
                local Callback = config.Callback or function() end
                
                local DropdownFrame = Instance.new("Frame")
                DropdownFrame.Name = "DropdownFrame"
                DropdownFrame.Size = UDim2.new(1, 0, 0, 35)
                DropdownFrame.BackgroundColor3 = Theme.TertiaryBackground
                DropdownFrame.BorderSizePixel = 0
                DropdownFrame.Parent = SectionContent
                
                local DropdownCorner = Instance.new("UICorner")
                DropdownCorner.CornerRadius = UDim.new(0, 6)
                DropdownCorner.Parent = DropdownFrame
                
                local DropdownLabel = Instance.new("TextLabel")
                DropdownLabel.Name = "Label"
                DropdownLabel.Size = UDim2.new(1, -120, 1, 0)
                DropdownLabel.Position = UDim2.new(0, 10, 0, 0)
                DropdownLabel.BackgroundTransparency = 1
                DropdownLabel.Text = DropdownName
                DropdownLabel.TextColor3 = Theme.Text
                DropdownLabel.TextSize = 13
                DropdownLabel.Font = Enum.Font.GothamMedium
                DropdownLabel.TextXAlignment = Enum.TextXAlignment.Left
                DropdownLabel.Parent = DropdownFrame
                
                local DropdownButton = Instance.new("TextButton")
                DropdownButton.Name = "DropdownButton"
                DropdownButton.Size = UDim2.new(0, 100, 0, 25)
                DropdownButton.Position = UDim2.new(1, -110, 0.5, -12.5)
                DropdownButton.BackgroundColor3 = Theme.SecondaryBackground
                DropdownButton.Text = Default
                DropdownButton.TextColor3 = Theme.Text
                DropdownButton.TextSize = 12
                DropdownButton.Font = Enum.Font.Gotham
                DropdownButton.Parent = DropdownFrame
                
                local DropdownBtnCorner = Instance.new("UICorner")
                DropdownBtnCorner.CornerRadius = UDim.new(0, 4)
                DropdownBtnCorner.Parent = DropdownButton
                
                local DropdownList = Instance.new("Frame")
                DropdownList.Name = "List"
                DropdownList.Size = UDim2.new(0, 100, 0, 0)
                DropdownList.Position = UDim2.new(1, -110, 1, 5)
                DropdownList.BackgroundColor3 = Theme.SecondaryBackground
                DropdownList.BorderSizePixel = 0
                DropdownList.ClipsDescendants = true
                DropdownList.Visible = false
                DropdownList.ZIndex = 10
                DropdownList.Parent = DropdownFrame
                
                local DropdownListCorner = Instance.new("UICorner")
                DropdownListCorner.CornerRadius = UDim.new(0, 4)
                DropdownListCorner.Parent = DropdownList
                
                local DropdownListLayout = Instance.new("UIListLayout")
                DropdownListLayout.SortOrder = Enum.SortOrder.LayoutOrder
                DropdownListLayout.Parent = DropdownList
                
                local expanded = false
                
                DropdownButton.MouseButton1Click:Connect(function()
                    expanded = not expanded
                    DropdownList.Visible = expanded
                    
                    if expanded then
                        local targetSize = #Options * 30
                        CreateTween(DropdownList, {Size = UDim2.new(0, 100, 0, targetSize)}, 0.2):Play()
                    else
                        CreateTween(DropdownList, {Size = UDim2.new(0, 100, 0, 0)}, 0.2):Play()
                        task.wait(0.2)
                        DropdownList.Visible = false
                    end
                end)
                
                for _, option in pairs(Options) do
                    local OptionButton = Instance.new("TextButton")
                    OptionButton.Name = option
                    OptionButton.Size = UDim2.new(1, 0, 0, 30)
                    OptionButton.BackgroundColor3 = Theme.TertiaryBackground
                    OptionButton.Text = option
                    OptionButton.TextColor3 = Theme.Text
                    OptionButton.TextSize = 12
                    OptionButton.Font = Enum.Font.Gotham
                    OptionButton.Parent = DropdownList
                    
                    OptionButton.MouseButton1Click:Connect(function()
                        DropdownButton.Text = option
                        expanded = false
                        CreateTween(DropdownList, {Size = UDim2.new(0, 100, 0, 0)}, 0.2):Play()
                        task.wait(0.2)
                        DropdownList.Visible = false
                        pcall(Callback, option)
                    end)
                    
                    OptionButton.MouseEnter:Connect(function()
                        CreateTween(OptionButton, {BackgroundColor3 = Theme.Hover}, 0.15):Play()
                    end)
                    
                    OptionButton.MouseLeave:Connect(function()
                        CreateTween(OptionButton, {BackgroundColor3 = Theme.TertiaryBackground}, 0.15):Play()
                    end)
                end
                
                local DropdownObject = {}
                function DropdownObject:SetValue(value)
                    if table.find(Options, value) then
                        DropdownButton.Text = value
                    end
                end
                
                return DropdownObject
            end
            
            function Section:AddInput(config)
                config = config or {}
                local InputName = config.Name or "Input"
                local Default = config.Default or ""
                local Placeholder = config.Placeholder or "Enter text..."
                local Callback = config.Callback or function() end
                
                local InputFrame = Instance.new("Frame")
                InputFrame.Name = "InputFrame"
                InputFrame.Size = UDim2.new(1, 0, 0, 50)
                InputFrame.BackgroundColor3 = Theme.TertiaryBackground
                InputFrame.BorderSizePixel = 0
                InputFrame.Parent = SectionContent
                
                local InputCorner = Instance.new("UICorner")
                InputCorner.CornerRadius = UDim.new(0, 6)
                InputCorner.Parent = InputFrame
                
                local InputLabel = Instance.new("TextLabel")
                InputLabel.Name = "Label"
                InputLabel.Size = UDim2.new(1, -20, 0, 20)
                InputLabel.Position = UDim2.new(0, 10, 0, 5)
                InputLabel.BackgroundTransparency = 1
                InputLabel.Text = InputName
                InputLabel.TextColor3 = Theme.Text
                InputLabel.TextSize = 13
                InputLabel.Font = Enum.Font.GothamMedium
                InputLabel.TextXAlignment = Enum.TextXAlignment.Left
                InputLabel.Parent = InputFrame
                
                local InputBox = Instance.new("TextBox")
                InputBox.Name = "InputBox"
                InputBox.Size = UDim2.new(1, -20, 0, 20)
                InputBox.Position = UDim2.new(0, 10, 1, -25)
                InputBox.BackgroundColor3 = Theme.SecondaryBackground
                InputBox.Text = Default
                InputBox.PlaceholderText = Placeholder
                InputBox.TextColor3 = Theme.Text
                InputBox.PlaceholderColor3 = Theme.SecondaryText
                InputBox.TextSize = 12
                InputBox.Font = Enum.Font.Gotham
                InputBox.ClearButtonMode = Enum.ClearButtonMode.WhileEditing
                InputBox.Parent = InputFrame
                
                local InputBoxCorner = Instance.new("UICorner")
                InputBoxCorner.CornerRadius = UDim.new(0, 4)
                InputBoxCorner.Parent = InputBox
                
                local InputBoxStroke = Instance.new("UIStroke")
                InputBoxStroke.Color = Theme.Border
                InputBoxStroke.Thickness = 1
                InputBoxStroke.Parent = InputBox
                
                InputBox.Focused:Connect(function()
                    CreateTween(InputBoxStroke, {Color = Theme.Accent}, 0.2):Play()
                end)
                
                InputBox.FocusLost:Connect(function(enter)
                    CreateTween(InputBoxStroke, {Color = Theme.Border}, 0.2):Play()
                    if enter then
                        pcall(Callback, InputBox.Text)
                    end
                end)
                
                local InputObject = {}
                function InputObject:SetValue(value)
                    InputBox.Text = value
                end
                
                return InputObject
            end
            
            function Section:AddKeybind(config)
                config = config or {}
                local KeybindName = config.Name or "Keybind"
                local Default = config.Default or Enum.KeyCode.E
                local Callback = config.Callback or function() end
                
                local KeybindFrame = Instance.new("Frame")
                KeybindFrame.Name = "KeybindFrame"
                KeybindFrame.Size = UDim2.new(1, 0, 0, 35)
                KeybindFrame.BackgroundColor3 = Theme.TertiaryBackground
                KeybindFrame.BorderSizePixel = 0
                KeybindFrame.Parent = SectionContent
                
                local KeybindCorner = Instance.new("UICorner")
                KeybindCorner.CornerRadius = UDim.new(0, 6)
                KeybindCorner.Parent = KeybindFrame
                
                local KeybindLabel = Instance.new("TextLabel")
                KeybindLabel.Name = "Label"
                KeybindLabel.Size = UDim2.new(1, -80, 1, 0)
                KeybindLabel.Position = UDim2.new(0, 10, 0, 0)
                KeybindLabel.BackgroundTransparency = 1
                KeybindLabel.Text = KeybindName
                KeybindLabel.TextColor3 = Theme.Text
                KeybindLabel.TextSize = 13
                KeybindLabel.Font = Enum.Font.GothamMedium
                KeybindLabel.TextXAlignment = Enum.TextXAlignment.Left
                KeybindLabel.Parent = KeybindFrame
                
                local KeybindButton = Instance.new("TextButton")
                KeybindButton.Name = "KeybindButton"
                KeybindButton.Size = UDim2.new(0, 60, 0, 25)
                KeybindButton.Position = UDim2.new(1, -70, 0.5, -12.5)
                KeybindButton.BackgroundColor3 = Theme.SecondaryBackground
                KeybindButton.Text = Default.Name
                KeybindButton.TextColor3 = Theme.Text
                KeybindButton.TextSize = 11
                KeybindButton.Font = Enum.Font.GothamBold
                KeybindButton.Parent = KeybindFrame
                
                local KeybindBtnCorner = Instance.new("UICorner")
                KeybindBtnCorner.CornerRadius = UDim.new(0, 4)
                KeybindBtnCorner.Parent = KeybindButton
                
                local currentKey = Default
                local listening = false
                
                KeybindButton.MouseButton1Click:Connect(function()
                    listening = true
                    KeybindButton.Text = "..."
                    KeybindButton.BackgroundColor3 = Theme.Accent
                end)
                
                UserInputService.InputBegan:Connect(function(input, gameProcessed)
                    if listening and input.UserInputType == Enum.UserInputType.Keyboard then
                        currentKey = input.KeyCode
                        KeybindButton.Text = input.KeyCode.Name
                        KeybindButton.BackgroundColor3 = Theme.SecondaryBackground
                        listening = false
                    end
                    
                    if not gameProcessed and input.KeyCode == currentKey then
                        pcall(Callback)
                    end
                end)
                
                local KeybindObject = {}
                function KeybindObject:SetValue(key)
                    currentKey = key
                    KeybindButton.Text = key.Name
                end
                
                return KeybindObject
            end
            
            function Section:AddParagraph(config)
                config = config or {}
                local Title = config.Title or "Paragraph"
                local Content = config.Content or "This is a paragraph."
                
                local ParagraphFrame = Instance.new("Frame")
                ParagraphFrame.Name = "ParagraphFrame"
                ParagraphFrame.Size = UDim2.new(1, 0, 0, 60)
                ParagraphFrame.BackgroundColor3 = Theme.TertiaryBackground
                ParagraphFrame.BorderSizePixel = 0
                ParagraphFrame.Parent = SectionContent
                
                local ParagraphCorner = Instance.new("UICorner")
                ParagraphCorner.CornerRadius = UDim.new(0, 6)
                ParagraphCorner.Parent = ParagraphFrame
                
                local ParagraphTitle = Instance.new("TextLabel")
                ParagraphTitle.Name = "Title"
                ParagraphTitle.Size = UDim2.new(1, -20, 0, 20)
                ParagraphTitle.Position = UDim2.new(0, 10, 0, 5)
                ParagraphTitle.BackgroundTransparency = 1
                ParagraphTitle.Text = Title
                ParagraphTitle.TextColor3 = Theme.Text
                ParagraphTitle.TextSize = 13
                ParagraphTitle.Font = Enum.Font.GothamBold
                ParagraphTitle.TextXAlignment = Enum.TextXAlignment.Left
                ParagraphTitle.Parent = ParagraphFrame
                
                local ParagraphContent = Instance.new("TextLabel")
                ParagraphContent.Name = "Content"
                ParagraphContent.Size = UDim2.new(1, -20, 1, -30)
                ParagraphContent.Position = UDim2.new(0, 10, 0, 25)
                ParagraphContent.BackgroundTransparency = 1
                ParagraphContent.Text = Content
                ParagraphContent.TextColor3 = Theme.SecondaryText
                ParagraphContent.TextSize = 12
                ParagraphContent.Font = Enum.Font.Gotham
                ParagraphContent.TextXAlignment = Enum.TextXAlignment.Left
                ParagraphContent.TextYAlignment = Enum.TextYAlignment.Top
                ParagraphContent.TextWrapped = true
                ParagraphContent.Parent = ParagraphFrame
                
                return ParagraphFrame
            end
            
            function Section:AddDivider()
                local Divider = Instance.new("Frame")
                Divider.Name = "Divider"
                Divider.Size = UDim2.new(1, 0, 0, 2)
                Divider.BackgroundColor3 = Theme.Border
                Divider.BorderSizePixel = 0
                Divider.Parent = SectionContent
                
                return Divider
            end
            
            return Section
        end
        
        return Tab
    end
    
    function Window:CreateNotification(config)
        config = config or {}
        local Title = config.Title or "Notification"
        local Content = config.Content or "This is a notification."
        local Duration = config.Duration or 3
        
        local NotificationFrame = Instance.new("Frame")
        NotificationFrame.Name = "Notification"
        NotificationFrame.Size = UDim2.new(0, 0, 0, 80)
        NotificationFrame.Position = UDim2.new(1, -20, 1, -100)
        NotificationFrame.BackgroundColor3 = Theme.SecondaryBackground
        NotificationFrame.BorderSizePixel = 0
        NotificationFrame.Parent = ScreenGui
        
        local NotifCorner = Instance.new("UICorner")
        NotifCorner.CornerRadius = UDim.new(0, 8)
        NotifCorner.Parent = NotificationFrame
        
        local NotifStroke = Instance.new("UIStroke")
        NotifStroke.Color = Theme.Accent
        NotifStroke.Thickness = 2
        NotifStroke.Parent = NotificationFrame
        
        local NotifTitle = Instance.new("TextLabel")
        NotifTitle.Name = "Title"
        NotifTitle.Size = UDim2.new(1, -20, 0, 25)
        NotifTitle.Position = UDim2.new(0, 10, 0, 10)
        NotifTitle.BackgroundTransparency = 1
        NotifTitle.Text = Title
        NotifTitle.TextColor3 = Theme.Text
        NotifTitle.TextSize = 14
        NotifTitle.Font = Enum.Font.GothamBold
        NotifTitle.TextXAlignment = Enum.TextXAlignment.Left
        NotifTitle.Parent = NotificationFrame
        
        local NotifContent = Instance.new("TextLabel")
        NotifContent.Name = "Content"
        NotifContent.Size = UDim2.new(1, -20, 0, 35)
        NotifContent.Position = UDim2.new(0, 10, 0, 35)
        NotifContent.BackgroundTransparency = 1
        NotifContent.Text = Content
        NotifContent.TextColor3 = Theme.SecondaryText
        NotifContent.TextSize = 12
        NotifContent.Font = Enum.Font.Gotham
        NotifContent.TextXAlignment = Enum.TextXAlignment.Left
        NotifContent.TextYAlignment = Enum.TextYAlignment.Top
        NotifContent.TextWrapped = true
        NotifContent.Parent = NotificationFrame
        
        CreateTween(NotificationFrame, {Size = UDim2.new(0, 300, 0, 80)}, 0.3):Play()
        
        task.wait(Duration)
        
        CreateTween(NotificationFrame, {Size = UDim2.new(0, 0, 0, 80)}, 0.3):Play()
        task.wait(0.3)
        NotificationFrame:Destroy()
    end
    
    function Window:Destroy()
        ScreenGui:Destroy()
    end
    
    return Window
end

return UILibrary
